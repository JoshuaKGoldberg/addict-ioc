
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Discovery Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="lifecycle.html" />
    
    
    <link rel="prev" href="hello-world.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Getting Started</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../setup.md">
            
                <span>
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    Examples
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="hello-world.html">
            
                <a href="hello-world.html">
            
                    
                    Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.2" data-path="discovery.html">
            
                <a href="discovery.html">
            
                    
                    Discovery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="lifecycle.html">
            
                <a href="lifecycle.html">
            
                    
                    Lifecycle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../hello-world.md">
            
                <span>
            
                    
                    Application Structure
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Concepts</li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <span>
            
                    
                    Container
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <span>
            
                    
                    Modules
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" >
            
                <span>
            
                    
                    Registrations
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" >
            
                <span>
            
                    
                    Validation
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" >
            
                <span>
            
                    
                    Invocation
            
                </span>
            

            
        </li>
    

    
        
        <li class="header">Reference</li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <span>
            
                    
                    Registration
            
                </span>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../community/">
            
                <a href="../../community/">
            
                    
                    Community
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../roadmap.html">
            
                <a href="../../roadmap.html">
            
                    
                    Roadmap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../../cheat-sheet.html">
            
                <a href="../../cheat-sheet.html">
            
                    
                    Cheat Sheet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../../faq.html">
            
                <a href="../../faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../../troubleshooting.md">
            
                <span>
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Discovery</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="discovery">Discovery</h1>
<p>In the <a href="hello-world.html">Hello World</a> example, you learned the most common case of how to deal with dependencies.</p>
<p>Those dependencies are statically declared so at design time we can already tell what will happen at runtime.</p>
<p>In more complex scenarios you often have dynamic dependencies - that means you can&apos;t or don&apos;t want to declare some dependencies statically.</p>
<p>For those cases a <em>discovery</em> comes in handy.</p>
<h2 id="lets-build-a-plugin-architecture-in-5-minutes">Let&apos;s build a plugin architecture in 5 minutes</h2>
<p>So, for a discovery you need to have criteria to discover things by.</p>
<p>addict-ioc does this by using tags - and the simplest use case of those tags is to use them as string labels.</p>
<p>To identify our plugin registrations we&apos;re going to tag them with the label <code>MyPlugin</code>.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> {Plugin1} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./plugin-one&apos;</span>;
<span class="hljs-keyword">import</span> {Plugin2} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./plugin-two&apos;</span>;
<span class="hljs-keyword">import</span> {MainApp} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./main-app&apos;</span>;

<span class="hljs-keyword">import</span> {Container} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;addict-ioc&apos;</span>;

<span class="hljs-keyword">const</span> container = <span class="hljs-keyword">new</span> Container();

container.register(<span class="hljs-string">&apos;MainApp&apos;</span>, MainApp)
  .dependencies(<span class="hljs-string">&apos;container&apos;</span>);

container.register(<span class="hljs-string">&apos;Plugin1&apos;</span>, Plugin1)
  .tags(<span class="hljs-string">&apos;MyPlugin&apos;</span>);

container.register(<span class="hljs-string">&apos;Plugin2&apos;</span>, Plugin2)
  .tags(<span class="hljs-string">&apos;MyPlugin&apos;</span>);
</code></pre>
<p>You might have noticed that we declared the <code>container</code> as a dependency of our <code>MainApp</code>. <code>container</code> is the default key under which the IoC container registers itself. So instead of creating a new container, you can inject the one that created you (creepy, huh?).</p>
<p>Let&apos;s take a look at the <code>MainApp</code> class to understand why the <code>container</code> is used as a dependency.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainApp</span> </span>{

  private container;

  <span class="hljs-keyword">constructor</span>(container) {
    <span class="hljs-keyword">this</span>.container = container;
  }

  initialize() {

    <span class="hljs-keyword">const</span> pluginKeys = <span class="hljs-keyword">this</span>.container.getKeysByTags(<span class="hljs-string">&apos;MyPlugin&apos;</span>);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> pluginKey <span class="hljs-keyword">of</span> pluginKeys) {

      <span class="hljs-keyword">const</span> pluginInstance = <span class="hljs-keyword">this</span>.container.resolve(pluginKey);

      <span class="hljs-comment">// do whatever you like ;)</span>
      pluginInstance.initialize();
    }
  }
}
</code></pre>
<p>In the <code>initialize</code>-method we call <code>getKeysByTags</code> on the <code>container</code> to get the keys of the registrations that are marked with the given tags. If we then iterate over that array we can retrieve an instance of each plugin and do programming stuff with it.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="hello-world.html" class="navigation navigation-prev " aria-label="Previous page: Hello World">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="lifecycle.html" class="navigation navigation-next " aria-label="Next page: Lifecycle">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Discovery","level":"1.3.2","depth":2,"next":{"title":"Lifecycle","level":"1.3.3","depth":2,"path":"getting-started/examples/lifecycle.md","ref":"getting-started/examples/lifecycle.md","articles":[]},"previous":{"title":"Hello World","level":"1.3.1","depth":2,"path":"getting-started/examples/hello-world.md","ref":"getting-started/examples/hello-world.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["collapsible-menu","livereload"],"pluginsConfig":{"collapsible-menu":{},"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"getting-started/examples/discovery.md","mtime":"2017-08-28T18:05:52.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-08-28T16:38:41.727Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

